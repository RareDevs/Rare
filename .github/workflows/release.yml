
name: "Release"


on:
  release:
    types: [ published ]


permissions:
  contents: write


jobs:

  title:
    name: Version ${{ github.ref_name }}
    runs-on: ubuntu-latest
    steps:
      - run: "true"

  pypi:
    if: "!github.event.release.prerelease"
    name: PyPI Release
    uses: ./.github/workflows/job_pypi.yml
    secrets: inherit
    with:
      version: ${{ github.ref_name }}

  ubuntu:
    if: ${{ true }}
    name: Ubuntu
    uses: ./.github/workflows/job_ubuntu.yml
    with:
      version: ${{ github.ref_name }}
  ubuntu-release:
    needs: ubuntu
    name: Ubuntu Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.deb
      name1: Rare-${{ github.ref_name }}.deb

  appimage:
    if: ${{ false }}
    name: AppImage
    uses: ./.github/workflows/job_appimage.yml
    with:
      version: ${{ github.ref_name }}
  appimage-release:
    needs: appimage
    name: AppImage Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.AppImage
      name1: Rare-${{ github.ref_name }}.AppImage
      file2: Rare.AppImage.zsync
      name2: Rare-${{ github.ref_name }}.AppImage.zsync

  nuitka-linux:
    if: ${{ true }}
    name: Nuitka Linux
    uses: ./.github/workflows/job_nuitka-linux.yml
    with:
      version: ${{ github.ref_name }}
  nuitka-linux-release:
    needs: nuitka-linux
    name: Nuitka Linux Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.zip
      name1: Rare-portable-linux-${{ github.ref_name }}.zip

  nuitka-macos:
    if: ${{ true }}
    name: Nuitka MacOS
    uses: ./.github/workflows/job_nuitka-macos.yml
    with:
      version: ${{ github.ref_name }}
  nuitka-macos-release:
    needs: nuitka-macos
    name: Nuitka MacOS Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare-arm64.zip
      name1: Rare-portable-macos-arm64-${{ github.ref_name }}.zip
      file2: Rare-x86_64.zip
      name2: Rare-portable-macos-x86_64-${{ github.ref_name }}.zip

  nuitka-windows:
    if: ${{ true }}
    name: Nuitka Windows
    uses: ./.github/workflows/job_nuitka-win.yml
    with:
      version: ${{ github.ref_name }}
  nuitka-windows-release:
    needs: nuitka-windows
    name: Nuitka Windows Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.zip
      name1: Rare-portable-windows-${{ github.ref_name }}.zip

  cx-freeze-appimage:
    if: ${{ true }}
    name: cx-Freeze AppImage
    uses: ./.github/workflows/job_cx-freeze-appimage.yml
    with:
      version: ${{ github.ref_name }}
  cx-freeze-appimage-release:
    needs: cx-freeze-appimage
    name: cx-Freeze AppImage Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.Appimage
      name1: Rare-${{ github.ref_name }}.Appimage

  cx-freeze-macos:
    if: ${{ true }}
    name: cx-Freeze MacOS
    uses: ./.github/workflows/job_cx-freeze-macos.yml
    with:
      version: ${{ github.ref_name }}
  cx-freeze-macos-release:
    needs: cx-freeze-macos
    name: cx-Freeze MacOS Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare-arm64.dmg
      name1: Rare-arm64-${{ github.ref_name }}.dmg
      file2: Rare-x86_64.dmg
      name2: Rare-x86_64-${{ github.ref_name }}.dmg

  cx-freeze-msi:
    if: ${{ true }}
    name: cx-Freeze MSI
    uses: ./.github/workflows/job_cx-freeze-msi.yml
    with:
      version: ${{ github.ref_name }}
  cx-freeze-msi-release:
    needs: cx-freeze-msi
    name: cx-Freeze MSI Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.msi
      name1: Rare-${{ github.ref_name }}.msi

  cx-freeze-zip-win:
    if: ${{ false }}
    name: cx-Freeze Portable Windows
    uses: ./.github/workflows/job_cx-freeze-zip-win.yml
    with:
      version: ${{ github.ref_name }}
  cx-freeze-zip-win-release:
    needs: cx-freeze-zip-win
    name: cx-Freeze Portable Windows Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare-portable-windows.zip
      name1: Rare-portable-windows-${{ github.ref_name }}.zip

  macos:
    if: ${{ false }}
    name: macOS
    uses: ./.github/workflows/job_macos.yml
    with:
      version: ${{ github.ref_name }}
  macos-release:
    needs: macos
    name: macOS Release
    uses: ./.github/workflows/job_publish.yml
    with:
      version: ${{ github.ref_name }}
      file1: Rare.dmg
      name1: Rare-${{ github.ref_name }}.dmg

